import{d as e}from"./el-tag-377e0f90.js";import{g as a,b as l}from"./index-98d51863.js";import{d as o,u as t,W as r,r as i,K as s,o as p,i as d,w as n,f as m,e as u,a as c,x as f,t as v,c as g,F as w,U as b}from"./index-d5304777.js";import{E as _}from"./el-card-2b130a3f.js";import{E as j,a as h}from"./el-table-column-0c648863.js";import"./el-checkbox-b2c1ef9f.js";import"./el-popper-20328552.js";import{E as y,a as k}from"./el-select-ce060cba.js";import{E as x}from"./el-input-18a8a90e.js";import{E as I,a as Y}from"./el-form-item-38df9850.js";import{E}from"./el-button-7384c59f.js";import"./use-form-common-props-594ab9f4.js";import"./event-5568c9d8.js";import"./use-form-item-6b2ca231.js";import"./isNil-1f22f7b0.js";import"./focus-trap-5bb091fd.js";import"./scroll-8db753ac.js";import"./validator-a82dd364.js";const $="/inno_newhw/pad/fe",D={"iot-learning-tools":"/inno_newhw","pad-correction-poetry":$,"pad-composition-recite":$,"pad-cal-paper-print":$,"pad-arithmetic-report":$,"pad-ai-study":$,"activity-pull-new":$,"pad-baby":"/inno_newhw/pad/fe/13"},T={class:"card-header"},V={class:"belong-apk"},C=m("div",{class:"vs-dom"},"VS",-1),M=o({__name:"index",setup(o){const{go:$}=t(),{query:M}=r(),H=i([]),N=i(""),q=i([]);(async()=>{const e=await a({page:1,limit:666,apk:M.apk});q.value=e.items.filter((e=>e.version!=M.version))})();const z=()=>{F(M.id,N.value)},F=async(e,a)=>{const o=await l({id1:e,id2:a});H.value=o},U=({column:e,rowIndex:a})=>{if("vs"===e.property)return 0===a?{rowspan:H.value.length,colspan:1}:[0,0]},A=(e,a)=>{const{commitId:l,createdTime:o,moduleName:t}=e,{commitId:r,createdTime:i}=a;let s="";s=o>i?`${r}...${l}`:`${l}...${r}`;const p=((e,a)=>{let l=e.replace("/static/","");return"learning-tools"===l&&(l="iot-learning-tools"),`https://git.zuoyebang.cc${D[l]}/${l}/compare/${a}`})(t,s);window.open(p,"_blank")};return(a,l)=>{const o=s("el-row");return p(),d(c(_),{class:"diff-page"},{header:n((()=>[m("div",T,[u(c(E),{onClick:l[0]||(l[0]=e=>c($)(-1))},{default:n((()=>[f("返回")])),_:1})])])),default:n((()=>[u(o,null,{default:n((()=>[m("span",V,"所属包名："+v(c(M).apk),1),u(c(I),{inline:!0},{default:n((()=>[u(c(Y),{label:"当前版本号："},{default:n((()=>[u(c(x),{disabled:"",value:c(M).version},null,8,["value"])])),_:1}),u(c(Y),{label:"比较的版本号："},{default:n((()=>[u(c(y),{modelValue:N.value,"onUpdate:modelValue":l[1]||(l[1]=e=>N.value=e),filterable:"",placeholder:"选择diff的版本号",onChange:z},{default:n((()=>[(p(!0),g(w,null,b(q.value,(e=>(p(),d(c(k),{key:e.id,label:e.version,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),u(c(j),{data:H.value,"span-method":U,border:"",style:{width:"100%"}},{default:n((()=>[u(c(h),{label:"page1",fixed:""},{default:n((()=>[u(c(h),{prop:"page1.pageName",label:"页面名称"}),u(c(h),{prop:"page1.pkgVersion",label:"版本号"}),u(c(h),{prop:"page1.commitId",label:"commitId","show-overflow-tooltip":!0},{default:n((e=>{var a,l;return[f(v(null==(l=null==(a=e.row)?void 0:a.page1)?void 0:l.commitId.slice(0,8)),1)]})),_:1}),u(c(h),{prop:"page1.createdTime",label:"创建时间"},{default:n((a=>{var l,o,t;return[f(v((null==(l=a.row)?void 0:l.page1)&&c(e)(null==(t=null==(o=a.row)?void 0:o.page1)?void 0:t.createdTime).format("YYYY/MM/DD HH:mm:ss")),1)]})),_:1})])),_:1}),u(c(h),{label:"",prop:"vs","label-width":"10"},{default:n((()=>[C])),_:1}),u(c(h),{label:"page2"},{default:n((()=>[u(c(h),{prop:"page2.pageName",label:"页面名称"}),u(c(h),{prop:"page2.pkgVersion",label:"版本号"}),u(c(h),{prop:"page2.commitId",label:"commitId","show-overflow-tooltip":!0},{default:n((e=>{var a,l;return[f(v(null==(l=null==(a=e.row)?void 0:a.page2)?void 0:l.commitId.slice(0,8)),1)]})),_:1}),u(c(h),{prop:"page2.createdTime",label:"创建时间"},{default:n((a=>{var l,o,t;return[f(v((null==(l=a.row)?void 0:l.page2)&&c(e)(null==(t=null==(o=a.row)?void 0:o.page2)?void 0:t.createdTime).format("YYYY/MM/DD HH:mm:ss")),1)]})),_:1})])),_:1}),u(c(h),{label:"操作"},{default:n((e=>[u(c(E),{type:"success",disabled:!(e.row.page1&&e.row.page2),onClick:a=>A(e.row.page1,e.row.page2)},{default:n((()=>[f(" Diff ")])),_:2},1032,["disabled","onClick"])])),_:1})])),_:1},8,["data"])])),_:1})}}});export{M as default};
