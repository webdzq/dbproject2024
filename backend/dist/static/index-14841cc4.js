import{d as e,u as a,W as l,r as o,K as t,o as r,i,w as s,f as p,e as d,a as n,x as m,t as u,c,F as f,U as v,P as g,_ as w}from"./index-191c25dc.js";import{d as b}from"./el-tag-3b69b670.js";import{g as _,b as j}from"./index-2cd7b7c8.js";import{E as h}from"./el-card-a8298071.js";import{E as y,a as k}from"./el-table-column-2168070b.js";import"./el-checkbox-183f938a.js";import"./el-popper-39222683.js";import{E as x,a as I}from"./el-select-498792b5.js";import{E as D}from"./el-input-e3d92cd0.js";import{E as Y,a as $}from"./el-form-item-01bc0774.js";import{E}from"./el-button-6c6de2b9.js";import"./use-form-common-props-01089bff.js";import"./index-7ef85113.js";import"./event-5568c9d8.js";import"./use-form-item-9493112b.js";import"./isNil-1f22f7b0.js";import"./focus-trap-1cdbca52.js";import"./scroll-967728ae.js";import"./validator-027b88f2.js";const T="/inno_newhw/pad/fe",V={"iot-learning-tools":"/inno_newhw","pad-correction-poetry":T,"pad-composition-recite":T,"pad-cal-paper-print":T,"pad-arithmetic-report":T,"pad-ai-study":T,"activity-pull-new":T,"pad-baby":"/inno_newhw/pad/fe/13"},C={class:"card-header"},H={class:"belong-apk"},N=p("div",{class:"vs-dom"},"VS",-1),M=w(e({__name:"index",setup(e){const{go:w}=a(),{query:T}=l(),M=o([]),U=o(""),z=o([]);(async()=>{const e=await _({page:1,limit:666,apk:T.apk});z.value=e.items.filter((e=>e.version!=T.version))})();const P=()=>{q(T.id,U.value)},q=async(e,a)=>{const l=await j({id1:e,id2:a});M.value=l},A=({column:e,rowIndex:a})=>{if("vs"===e.property)return 0===a?{rowspan:M.value.length,colspan:1}:[0,0]},B=(e,a)=>{const{commitId:l,createdTime:o,moduleName:t}=e,{commitId:r,createdTime:i}=a;let s="";s=o>i?`${r}...${l}`:`${l}...${r}`;const p=((e,a)=>{let l=e.replace("/static/","");return"learning-tools"===l&&(l="iot-learning-tools"),`https://git.zuoyebang.cc${V[l]}/${l}/compare/${a}`})(t,s);window.open(p,"_blank")};return(e,a)=>{const l=t("el-row");return r(),i(n(h),{class:"diff-page"},{header:s((()=>[p("div",C,[d(n(E),{onClick:a[0]||(a[0]=e=>n(w)(-1))},{default:s((()=>[m("返回")])),_:1})])])),default:s((()=>[d(l,null,{default:s((()=>[p("span",H,"所属包名："+u(n(T).apk),1),d(n(Y),{inline:!0},{default:s((()=>[d(n($),{label:"当前版本号："},{default:s((()=>[d(n(D),{disabled:"",value:n(T).version},null,8,["value"])])),_:1}),d(n($),{label:"比较的版本号："},{default:s((()=>[d(n(x),{modelValue:U.value,"onUpdate:modelValue":a[1]||(a[1]=e=>U.value=e),filterable:"",placeholder:"选择diff的版本号",onChange:P},{default:s((()=>[(r(!0),c(f,null,v(z.value,(e=>(r(),i(n(I),{key:e.id,label:e.version,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(n(y),{data:M.value,"span-method":A,border:"",style:{width:"100%"}},{default:s((()=>[d(n(k),{label:"page1",fixed:""},{default:s((()=>[d(n(k),{prop:"page1.pageName",label:"页面名称"}),d(n(k),{prop:"page1.pkgVersion",label:"版本号"}),d(n(k),{prop:"page1.commitId",label:"commitId","show-overflow-tooltip":!0},{default:s((e=>{var a,l;return[m(u(null==(l=null==(a=e.row)?void 0:a.page1)?void 0:l.commitId.slice(0,8)),1)]})),_:1}),d(n(k),{prop:"page1.createdTime",label:"创建时间"},{default:s((e=>{var a,l,o;return[m(u((null==(a=e.row)?void 0:a.page1)&&n(b)(null==(o=null==(l=e.row)?void 0:l.page1)?void 0:o.createdTime).format("YYYY/MM/DD HH:mm:ss")),1)]})),_:1})])),_:1}),d(n(k),{label:"",prop:"vs","label-width":"10"},{default:s((()=>[N])),_:1}),d(n(k),{label:"page2"},{default:s((()=>[d(n(k),{prop:"page2.pageName",label:"页面名称"}),d(n(k),{prop:"page2.pkgVersion",label:"版本号"}),d(n(k),{prop:"page2.commitId",label:"commitId","show-overflow-tooltip":!0},{default:s((e=>{var a,l;return[m(u(null==(l=null==(a=e.row)?void 0:a.page2)?void 0:l.commitId.slice(0,8)),1)]})),_:1}),d(n(k),{prop:"page2.createdTime",label:"创建时间"},{default:s((e=>{var a,l,o;return[m(u((null==(a=e.row)?void 0:a.page2)&&n(b)(null==(o=null==(l=e.row)?void 0:l.page2)?void 0:o.createdTime).format("YYYY/MM/DD HH:mm:ss")),1)]})),_:1})])),_:1}),d(n(k),{label:"操作"},{default:s((e=>[g(' <a :href="scope.row.diffUrl">Diff</a> '),d(n(E),{type:"success",disabled:!(e.row.page1&&e.row.page2),onClick:a=>B(e.row.page1,e.row.page2)},{default:s((()=>[m(" Diff ")])),_:2},1032,["disabled","onClick"])])),_:1})])),_:1},8,["data"])])),_:1})}}}),[["__file","/Users/zyb-dong/github/project425/fontend/src/views/DiffPage/index.vue"]]);export{M as default};
