import{d as e,u as a,r as t,s as o,e as i,x as l,F as s,y as r,o as n,i as p,w as m,a as d,f as c,z as u,_ as f}from"./index-14c99acf.js";import{u as g,a as h,S as j,T as b,C as y}from"./useCrudSchemas-3dff12e3.js";import{E as x}from"./el-button-b39417c4.js";import{E as v}from"./tree-72b1666d.js";import"./el-input-90f914cc.js";import"./el-overlay-e1a7640a.js";import{a as w,b as S}from"./index-1dc4238d.js";import{u as z}from"./useEmitt-24a6498c.js";import{d as P}from"./el-tag-b3f37f77.js";import"./el-card-280f93ab.js";import"./el-popper-423896a2.js";import"./isNil-1f22f7b0.js";import"./use-form-common-props-d73423f8.js";import"./focus-trap-4b2fe507.js";import"./useForm-40b11b9e.js";import"./el-form-item-6a11bdc7.js";import"./el-row-b3405836.js";import"./el-checkbox-23abc4dc.js";import"./event-5568c9d8.js";import"./use-form-item-95457b9b.js";import"./el-radio-de30d299.js";import"./el-select-562df675.js";import"./scroll-48d2443d.js";import"./validator-4801b3bd.js";import"./aria-ecee1d93.js";import"./index-3bdc3931.js";import"./el-table-column-257bd6b9.js";import"./el-pagination-7293d9ec.js";import"./index-6d20cfdf.js";import"./vnode-8e602242.js";import"./index-a4774437.js";const k={class:"mb-10px"},C=e({name:"PageMap"}),M=f(e({...C,setup(e){const{push:f}=a(),C=t({}),{tableRegister:M,tableState:B,tableMethods:I}=g({fetchDataApi:async()=>{const{currentPage:e,pageSize:a}=B,t=await S({page:d(e),limit:d(a),...d(C)});return{list:t.items,total:t.meta.total}}}),{loading:T,dataList:_,total:D,currentPage:E,pageSize:L}=B,{getList:N}=I;z({name:"getApkList",callback:e=>{"add"===e&&(E.value=1),N()}});const R=o([{field:"id",label:"Id",search:{hidden:!0}},{field:"apkName",label:"包名",search:{component:"Input"},form:{component:"Input",colProps:{span:24}},detail:{span:24}},{field:"appName",label:"应用名称",search:{component:"Input"},form:{component:"Input",colProps:{span:24}},detail:{span:24}},{field:"pageNum",label:"页面数量",search:{hidden:!0},formatter:e=>e.pages.length},{field:"online",label:"应用状态",search:{component:"Select",componentProps:{options:[{label:"上线",value:"1"},{label:"下线",value:"0"}]}},formatter:(e,a)=>"1"==e.online?"上线":"下线"},{field:"createdBy",label:"创建人",search:{hidden:!0}},{field:"updatedBy",label:"更新人",search:{hidden:!0}},{field:"updatedTime",label:"更新时间",search:{hidden:!0},formatter:(e,a,t)=>P(t).format("YYYY-MM-DD HH:mm:ss")},{field:"action",label:"操作",width:"240px",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{slots:{default:e=>i(s,null,[i("div",{class:"action-btns",style:"display: flex; flex-wrap: wrap"},[i(x,{type:"primary",onClick:()=>Y(e[0].row,"detail")},{default:()=>[l("详情")]}),i(x,{type:"primary",onClick:()=>Y(e[0].row,"edit")},{default:()=>[l("编辑")]}),"1"==e[0].row.online&&i(x,{type:"danger",onClick:()=>Y(e[0].row,"offline")},{default:()=>[l("下线")]})])])}}}]),{allSchemas:U}=h(R),Y=(e,a)=>{console.log(e,a),"edit"===a?f(`/localization/page-map/add?id=${e.id}`):"offline"===a?v.confirm("确定下线吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await w({id:e.id}).catch((()=>{}))&&(r.success("下线成功"),N())})):"detail"===a&&f(`/localization/page-map/detail?id=${e.id}`)},A=()=>{f("/localization/page-map/add")},F=e=>{C.value=e,N()};return(e,a)=>(n(),p(d(y),null,{default:m((()=>[i(d(j),{schema:d(U).searchSchema,onSearch:F},null,8,["schema"]),c("div",k,[i(d(x),{type:"primary",onClick:A},{default:m((()=>[l("新增")])),_:1})]),i(d(b),{pageSize:d(L),"onUpdate:pageSize":a[0]||(a[0]=e=>u(L)?L.value=e:null),currentPage:d(E),"onUpdate:currentPage":a[1]||(a[1]=e=>u(E)?E.value=e:null),columns:d(U).tableColumns,data:d(_),loading:d(T),pagination:{total:d(D)},onRegister:d(M)},null,8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])])),_:1}))}}),[["__file","/Users/zyb-dong/github/project425/fontend/src/views/PageMap/index.vue"]]);export{M as default};
