import{d as e,u as a,q as l,r as t,z as s,A as o,o as i,i as n,w as r,e as c,a as m,s as d,B as u,x as p,v as _,_ as h}from"./index-5daae5c6.js";import{C as f}from"./ContentDetailWrap-75ea7bde.js";import{u as y}from"./useEmitt-7829992f.js";import{g as v,u as b,a as g}from"./index-00f1f2a4.js";import{E as w,a as V}from"./el-form-item-ada12a4e.js";import{E as j}from"./el-button-4a7b0ca2.js";import{E as q}from"./el-input-d215ca9f.js";import"./index-5f2b1643.js";const k=h(e({__name:"add",setup(e){const{push:h,go:k}=a();y();const x=l({team_name:[{required:!0,message:"team name is required",trigger:"blur"}],coach_name:[{required:!0,message:"coach name is required",trigger:"blur"}],start_year:[{required:!0,message:"start_year are required",trigger:"blur"}]}),C=t();t([]);const{query:F}=s(),U=t(!1),E=t(!1),z=l({coach_name:"",nationality:"",start_year:1970,num_champion:""});F.id&&(async()=>{E.value=!0;const e=await v({coach_id:F.id});if(console.log("res_data",e),e){let a=null==e?void 0:e.items[0];Object.assign(z,a),E.value=!1}})();return(e,a)=>{const l=o("loading");return i(),n(m(f),{title:m(F).id?"edit":"add",onBack:a[7]||(a[7]=e=>m(h)("/coach/list"))},{header:r((()=>[c(m(j),{onClick:a[0]||(a[0]=e=>m(k)(-1))},{default:r((()=>[d("Go")])),_:1})])),default:r((()=>[u((i(),n(m(w),{ref_key:"ruleFormRef",ref:C,model:z,rules:x,"label-width":"120px",class:"demo-ruleForm",size:"default","status-icon":""},{default:r((()=>[c(m(V),{label:"Coach Name",prop:"coach_name"},{default:r((()=>[c(m(q),{modelValue:z.coach_name,"onUpdate:modelValue":a[1]||(a[1]=e=>z.coach_name=e),class:"width-190",placeholder:"place input",disabled:!!m(F).id},null,8,["modelValue","disabled"])])),_:1}),c(m(V),{label:"start year",prop:"start_year"},{default:r((()=>[c(m(q),{modelValue:z.start_year,"onUpdate:modelValue":a[2]||(a[2]=e=>z.start_year=e),class:"width-190",placeholder:"place input year"},null,8,["modelValue"])])),_:1}),p(' <el-form-item label="team_name ">\n        <el-select v-model="ruleForm.coach" class="width-190" placeholder="select team name">\n          <el-option\n            v-for="item in TeamOptions"\n            :key="item.id"\n            :label="item.name"\n            :value="item.id"\n          />\n        </el-select>\n      </el-form-item> '),c(m(V),{label:"nationality",prop:"nationality"},{default:r((()=>[c(m(q),{modelValue:z.nationality,"onUpdate:modelValue":a[3]||(a[3]=e=>z.nationality=e),class:"width-190",placeholder:"place iput"},null,8,["modelValue"])])),_:1}),c(m(V),{label:"num_champion",prop:"num_champion"},{default:r((()=>[c(m(q),{modelValue:z.num_champion,"onUpdate:modelValue":a[4]||(a[4]=e=>z.num_champion=e),class:"width-190",placeholder:"place iput num_champion",type:"number",min:"0"},null,8,["modelValue"])])),_:1}),c(m(V),null,{default:r((()=>[c(m(j),{type:"primary",onClick:a[5]||(a[5]=e=>(async e=>{e&&await e.validate((async(e,a)=>{if(e){console.log("ruleForm=",z),U.value=!0;const e=Object.assign({},z);let a;if(F.id){const e={coach_id:z.coach_id,coach_name:z.coach_name,nationality:z.nationality,start_year:z.start_year,num_champion:z.num_champion};a=await b(e).catch((()=>{})).finally((()=>{U.value=!1}))}else a=await g(e).catch((()=>{})).finally((()=>{U.value=!1}));a&&(_.success(F.id?"update success":"save success"),h("/coach/list"))}else console.log("error submit!",a)}))})(C.value))},{default:r((()=>[d("Save")])),_:1}),m(F).id?p("v-if",!0):(i(),n(m(j),{key:0,onClick:a[6]||(a[6]=e=>{var a;(a=C.value)&&a.resetFields()})},{default:r((()=>[d("Reset")])),_:1}))])),_:1})])),_:1},8,["model","rules"])),[[l,E.value]])])),_:1},8,["title"])}}}),[["__file","/Users/zyb-dong/iit/cs425/dbproject/frontend/src/views/coach/add.vue"]]);export{k as default};
