import{u as e,a,_ as t,b as o,c as l}from"./useCrudSchemas-b817de72.js";import{d as i,u as s,r,s as n,e as p,x as m,F as d,y as c,o as u,i as f,w as g,a as h,f as j,z as b}from"./index-d5304777.js";import{E as y}from"./el-button-7384c59f.js";import{E as x}from"./tree-05cd14e5.js";import"./el-input-18a8a90e.js";import"./el-overlay-cfbba524.js";import{a as v,b as w}from"./index-104a7b48.js";import{u as S}from"./useEmitt-da8011a9.js";import{d as z}from"./el-tag-377e0f90.js";import"./el-card-2b130a3f.js";import"./el-popper-20328552.js";import"./isNil-1f22f7b0.js";import"./use-form-common-props-594ab9f4.js";import"./focus-trap-5bb091fd.js";import"./useForm-aca3a07d.js";import"./el-form-item-38df9850.js";import"./el-row-da9cc34b.js";import"./el-checkbox-b2c1ef9f.js";import"./event-5568c9d8.js";import"./use-form-item-6b2ca231.js";import"./el-radio-827539ee.js";import"./el-select-ce060cba.js";import"./scroll-8db753ac.js";import"./validator-a82dd364.js";import"./aria-ecee1d93.js";import"./index-2e3c1611.js";import"./el-table-column-0c648863.js";import"./el-pagination-60cf2577.js";import"./index-ed3b1f85.js";import"./vnode-925e3556.js";const P={class:"mb-10px"},k=i({name:"PageMap"}),C=i({...k,setup(i){const{push:k}=s(),C=r({}),{tableRegister:B,tableState:I,tableMethods:M}=e({fetchDataApi:async()=>{const{currentPage:e,pageSize:a}=I,t=await w({page:h(e),limit:h(a),...h(C)});return{list:t.items,total:t.meta.total}}}),{loading:N,dataList:D,total:E,currentPage:L,pageSize:R}=I,{getList:Y}=M;S({name:"getApkList",callback:e=>{"add"===e&&(L.value=1),Y()}});const A=n([{field:"id",label:"Id",search:{hidden:!0}},{field:"apkName",label:"包名",search:{component:"Input"},form:{component:"Input",colProps:{span:24}},detail:{span:24}},{field:"appName",label:"应用名称",search:{component:"Input"},form:{component:"Input",colProps:{span:24}},detail:{span:24}},{field:"pageNum",label:"页面数量",search:{hidden:!0},formatter:e=>e.pages.length},{field:"online",label:"应用状态",search:{component:"Select",componentProps:{options:[{label:"上线",value:"1"},{label:"下线",value:"0"}]}},formatter:(e,a)=>"1"==e.online?"上线":"下线"},{field:"createdBy",label:"创建人",search:{hidden:!0}},{field:"updatedBy",label:"更新人",search:{hidden:!0}},{field:"updatedTime",label:"更新时间",search:{hidden:!0},formatter:(e,a,t)=>z(t).format("YYYY-MM-DD HH:mm:ss")},{field:"action",label:"操作",width:"240px",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{slots:{default:e=>p(d,null,[p("div",{class:"action-btns",style:"display: flex; flex-wrap: wrap"},[p(y,{type:"primary",onClick:()=>H(e[0].row,"detail")},{default:()=>[m("详情")]}),p(y,{type:"primary",onClick:()=>H(e[0].row,"edit")},{default:()=>[m("编辑")]}),"1"==e[0].row.online&&p(y,{type:"danger",onClick:()=>H(e[0].row,"offline")},{default:()=>[m("下线")]})])])}}}]),{allSchemas:F}=a(A),H=(e,a)=>{console.log(e,a),"edit"===a?k(`/localization/page-map/add?id=${e.id}`):"offline"===a?x.confirm("确定下线吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await v({id:e.id}).catch((()=>{}))&&(c.success("下线成功"),Y())})):"detail"===a&&k(`/localization/page-map/detail?id=${e.id}`)},T=()=>{k("/localization/page-map/add")},U=e=>{C.value=e,Y()};return(e,a)=>(u(),f(h(l),null,{default:g((()=>[p(h(t),{schema:h(F).searchSchema,onSearch:U},null,8,["schema"]),j("div",P,[p(h(y),{type:"primary",onClick:T},{default:g((()=>[m("新增")])),_:1})]),p(h(o),{pageSize:h(R),"onUpdate:pageSize":a[0]||(a[0]=e=>b(R)?R.value=e:null),currentPage:h(L),"onUpdate:currentPage":a[1]||(a[1]=e=>b(L)?L.value=e:null),columns:h(F).tableColumns,data:h(D),loading:h(N),pagination:{total:h(E)},onRegister:h(B)},null,8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])])),_:1}))}});export{C as default};
