import{d as e,u as a,q as l,r as t,z as d,A as s,o,i as u,w as i,e as m,a as r,s as n,B as c,c as p,F as _,C as f,x as y,v,_ as h}from"./index-5daae5c6.js";import{C as b}from"./ContentDetailWrap-75ea7bde.js";import{u as g}from"./useEmitt-7829992f.js";import{a as V,b as w,u as j,c as q,g as k}from"./index-33a79b05.js";import{E as x,a as U}from"./el-form-item-ada12a4e.js";import{E as C}from"./el-button-4a7b0ca2.js";import{E}from"./el-input-d215ca9f.js";import{E as F,a as z}from"./el-select-03ddc29b.js";import"./el-popper-8a023621.js";import"./index-5f2b1643.js";const O=h(e({__name:"add",setup(e){const{push:h,go:O}=a();g();const B=l({team_name:[{required:!0,message:"team name is required",trigger:"blur"}],coach_name:[{required:!0,message:"coach name is required",trigger:"blur"}],city:[{required:!0,message:"city are required",trigger:"blur"}],year_founded:[{required:!0,message:"year_founded are required",trigger:"blur"}]}),G=t(),I=t([]);(async()=>{const e=await V();I.value=null==e?void 0:e.items.map((e=>({id:e.coach_id,name:e.coach_name}))),console.log("coachOptions.value",I.value);R.id&&(async()=>{var e;A.value=!0;const a=await k({team_id:R.id});if(a){let l=null==a?void 0:a.items[0];Object.assign(D,l);let t=I.value.filter((e=>e.name==l.coach_name));D.coach=null==(e=t[0])?void 0:e.id,A.value=!1}})()})();const N=t([]);(async()=>{const e=await w();N.value=null==e?void 0:e.items.map((e=>({id:e.stadium_id,name:e.stadium_name}))),console.log("stadiumOptions.value",N.value)})();const{query:R}=d(),S=t(!1),A=t(!1),D=l({team_id:"",team_name:"",city:"",coach:"",stadium_name:"",year_founded:1970,introduce:""});return(e,a)=>{const l=s("loading");return o(),u(r(b),{title:r(R).id?"edit":"add",onBack:a[9]||(a[9]=e=>r(h)("/team/list"))},{header:i((()=>[m(r(C),{onClick:a[0]||(a[0]=e=>r(O)(-1))},{default:i((()=>[n("Go")])),_:1})])),default:i((()=>[c((o(),u(r(x),{ref_key:"ruleFormRef",ref:G,model:D,rules:B,"label-width":"120px",class:"demo-ruleForm",size:"default","status-icon":""},{default:i((()=>[m(r(U),{label:"Team Name",prop:"team_name"},{default:i((()=>[m(r(E),{modelValue:D.team_name,"onUpdate:modelValue":a[1]||(a[1]=e=>D.team_name=e),class:"width-190",placeholder:"place input",disabled:!!r(R).id},null,8,["modelValue","disabled"])])),_:1}),m(r(U),{label:"city",prop:"city"},{default:i((()=>[m(r(E),{modelValue:D.city,"onUpdate:modelValue":a[2]||(a[2]=e=>D.city=e),class:"width-190",placeholder:"place iput"},null,8,["modelValue"])])),_:1}),m(r(U),{label:"year founded",prop:"year_founded"},{default:i((()=>[m(r(E),{modelValue:D.year_founded,"onUpdate:modelValue":a[3]||(a[3]=e=>D.year_founded=e),class:"width-190",placeholder:"place input year"},null,8,["modelValue"])])),_:1}),m(r(U),{label:"coach name "},{default:i((()=>[m(r(F),{modelValue:D.coach,"onUpdate:modelValue":a[4]||(a[4]=e=>D.coach=e),class:"width-190",placeholder:"select coach name"},{default:i((()=>[(o(!0),p(_,null,f(I.value,(e=>(o(),u(r(z),{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(r(U),{label:"Stadium Name"},{default:i((()=>[m(r(F),{modelValue:D.stadium_name,"onUpdate:modelValue":a[5]||(a[5]=e=>D.stadium_name=e),class:"width-190",placeholder:"select stadium name"},{default:i((()=>[(o(!0),p(_,null,f(N.value,(e=>(o(),u(r(z),{key:e.id,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(r(U),{label:"Introduce",prop:"introduce"},{default:i((()=>[m(r(E),{modelValue:D.introduce,"onUpdate:modelValue":a[6]||(a[6]=e=>D.introduce=e),class:"width-190",placeholder:"place iput",type:"textarea",autosize:""},null,8,["modelValue"])])),_:1}),m(r(U),null,{default:i((()=>[m(r(C),{type:"primary",onClick:a[7]||(a[7]=e=>(async e=>{e&&await e.validate((async(e,a)=>{if(e){console.log("ruleForm=",D),S.value=!0;const e=Object.assign({},D);let a;if(R.id){const e={team_id:D.team_id,team_name:D.team_name,city:D.city,coach:D.coach,stadium_name:D.stadium_name,year_founded:D.year_founded,introduce:D.introduce};a=await j(e).catch((()=>{})).finally((()=>{S.value=!1}))}else a=await q(e).catch((()=>{})).finally((()=>{S.value=!1}));a&&(v.success(R.id?"update success":"save success"),h("/team/list"))}else console.log("error submit!",a)}))})(G.value))},{default:i((()=>[n("Save")])),_:1}),r(R).id?y("v-if",!0):(o(),u(r(C),{key:0,onClick:a[8]||(a[8]=e=>{var a;(a=G.value)&&a.resetFields()})},{default:i((()=>[n("Reset")])),_:1}))])),_:1})])),_:1},8,["model","rules"])),[[l,A.value]])])),_:1},8,["title"])}}}),[["__file","/Users/zyb-dong/iit/cs425/dbproject/frontend/src/views/team/add.vue"]]);export{O as default};
