import{d as e,u as a,q as l,r as t,z as r,A as d,o as s,i as u,w as o,e as i,a as n,s as m,B as p,c,F as g,C as _,x as h,v as y,_ as f}from"./index-5daae5c6.js";import{C as b}from"./ContentDetailWrap-75ea7bde.js";import{u as V}from"./useEmitt-7829992f.js";import{g as w,u as v,a as j}from"./index-80679fe0.js";import{g as q}from"./index-33a79b05.js";import{E as U,a as x}from"./el-form-item-ada12a4e.js";import{E as k}from"./el-button-4a7b0ca2.js";import{E as C}from"./el-input-d215ca9f.js";import{E,a as F}from"./el-select-03ddc29b.js";import"./el-popper-8a023621.js";import"./index-5f2b1643.js";const z=f(e({__name:"add",setup(e){const{push:f,go:z}=a();V();const B=l({name:[{required:!0,message:"player name is required",trigger:"blur"}],team_id:[{required:!0,message:"team name is required",trigger:"blur"}],country:[{required:!0,message:"country are required",trigger:"blur"}],age:[{required:!0,message:"age are required",trigger:"blur"}],height:[{required:!0,message:"height are required",trigger:"blur"}],weight:[{required:!0,message:"weight are required",trigger:"blur"}]}),G=t(),I=t([]);t([]);const{query:O}=r(),R=t(!1),A=t(!1),D=l({player_id:"",name:"",age:"",jersey_number:"",team_name:"",guard_position:"",height:"",weight:"",last_attended:"",country:"",salary:"",introduce:"",mvp_times:""});O.id&&(async()=>{A.value=!0;const e=await w({player_id:O.id});if(console.log("res_data",e),e){let a=null==e?void 0:e.items[0];Object.assign(D,a),A.value=!1}})();(async()=>{const e=await q();I.value=null==e?void 0:e.items.map((e=>({id:e.team_id,name:e.team_name})))})();return(e,a)=>{const l=d("loading");return s(),u(n(b),{title:n(O).id?"edit":"add",onBack:a[14]||(a[14]=e=>n(f)("/player/list"))},{header:o((()=>[i(n(k),{onClick:a[0]||(a[0]=e=>n(z)(-1))},{default:o((()=>[m("Go")])),_:1})])),default:o((()=>[p((s(),u(n(U),{ref_key:"ruleFormRef",ref:G,model:D,rules:B,"label-width":"120px",class:"demo-ruleForm",size:"default","status-icon":""},{default:o((()=>[i(n(x),{label:"Player Name",prop:"name"},{default:o((()=>[i(n(C),{modelValue:D.name,"onUpdate:modelValue":a[1]||(a[1]=e=>D.name=e),class:"width-190",placeholder:"place input",disabled:!!n(O).id},null,8,["modelValue","disabled"])])),_:1}),i(n(x),{label:"age",prop:"age"},{default:o((()=>[i(n(C),{modelValue:D.age,"onUpdate:modelValue":a[2]||(a[2]=e=>D.age=e),class:"width-190",placeholder:"place iput"},null,8,["modelValue"])])),_:1}),i(n(x),{label:"team name"},{default:o((()=>[i(n(E),{modelValue:D.team_name,"onUpdate:modelValue":a[3]||(a[3]=e=>D.team_name=e),class:"width-190",placeholder:"select team name"},{default:o((()=>[(s(!0),c(g,null,_(I.value,(e=>(s(),u(n(F),{key:e.id,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),i(n(x),{label:"jersey number ",prop:"jersey_number"},{default:o((()=>[i(n(C),{modelValue:D.jersey_number,"onUpdate:modelValue":a[4]||(a[4]=e=>D.jersey_number=e),class:"width-190",placeholder:"place iput"},null,8,["modelValue"])])),_:1}),i(n(x),{label:"guard position",prop:"guard_position"},{default:o((()=>[i(n(C),{modelValue:D.guard_position,"onUpdate:modelValue":a[5]||(a[5]=e=>D.guard_position=e),class:"width-190",placeholder:"place iput"},null,8,["modelValue"])])),_:1}),i(n(x),{label:"height",prop:"height"},{default:o((()=>[i(n(C),{modelValue:D.height,"onUpdate:modelValue":a[6]||(a[6]=e=>D.height=e),class:"width-190",placeholder:"place iput"},null,8,["modelValue"])])),_:1}),i(n(x),{label:"weight",prop:"weight"},{default:o((()=>[i(n(C),{modelValue:D.weight,"onUpdate:modelValue":a[7]||(a[7]=e=>D.weight=e),class:"width-190",placeholder:"place iput"},null,8,["modelValue"])])),_:1}),i(n(x),{label:"last_attended",prop:"last_attended"},{default:o((()=>[i(n(C),{modelValue:D.last_attended,"onUpdate:modelValue":a[8]||(a[8]=e=>D.last_attended=e),class:"width-190",placeholder:"place iput"},null,8,["modelValue"])])),_:1}),i(n(x),{label:"country",prop:"country"},{default:o((()=>[i(n(C),{modelValue:D.country,"onUpdate:modelValue":a[9]||(a[9]=e=>D.country=e),class:"width-190",placeholder:"place iput"},null,8,["modelValue"])])),_:1}),i(n(x),{label:"salary",prop:"salary"},{default:o((()=>[i(n(C),{modelValue:D.salary,"onUpdate:modelValue":a[10]||(a[10]=e=>D.salary=e),class:"width-190",placeholder:"place iput"},null,8,["modelValue"])])),_:1}),i(n(x),{label:"Introduce",prop:"introduce"},{default:o((()=>[i(n(C),{modelValue:D.introduce,"onUpdate:modelValue":a[11]||(a[11]=e=>D.introduce=e),class:"width-190",placeholder:"place iput",type:"textarea",autosize:""},null,8,["modelValue"])])),_:1}),i(n(x),null,{default:o((()=>[i(n(k),{type:"primary",onClick:a[12]||(a[12]=e=>(async e=>{e&&await e.validate((async(e,a)=>{if(e){console.log("ruleForm=",D),R.value=!0;const e={name:D.name,age:D.age,jersey_number:D.jersey_number,team_name:D.team_name,guard_position:D.guard_position,height:D.height,weight:D.weight,last_attended:D.last_attended,country:D.country,salary:D.salary,introduce:D.introduce};let a;if(O.id){const l=Object.assign({player_id:D.player_id},e);a=await v(l).catch((()=>{})).finally((()=>{R.value=!1}))}else a=await j(e).catch((()=>{})).finally((()=>{R.value=!1}));a&&(y.success(O.id?"update success":"save success"),f("/player/list"))}else console.log("error submit!",a)}))})(G.value))},{default:o((()=>[m("Save")])),_:1}),n(O).id?h("v-if",!0):(s(),u(n(k),{key:0,onClick:a[13]||(a[13]=e=>{var a;(a=G.value)&&a.resetFields()})},{default:o((()=>[m("Reset")])),_:1}))])),_:1})])),_:1},8,["model","rules"])),[[l,A.value]])])),_:1},8,["title"])}}}),[["__file","/Users/zyb-dong/iit/cs425/dbproject/frontend/src/views/player/add.vue"]]);export{z as default};
