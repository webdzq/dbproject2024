import{E as e}from"./el-button-7384c59f.js";import{c as n,d as o,u as t,E as l,O as r,w as a}from"./el-popper-20328552.js";import{a7 as s,ai as i,B as u,d,O as c,r as p,aJ as f,aB as m,a8 as v,a as g,aL as b,A as h,Z as y,G as w,cO as E,bk as C,V as I,ah as k,K as x,o as T,i as B,w as S,e as _,bx as R,by as M,aA as F,E as O,C as L,b7 as $,aI as P,H as A,I as D,J as K,c as z,aq as N,M as G,n as j,P as H,aW as V,f as J,ae as U,N as q,F as Y,a9 as W,S as Q,bO as Z,cP as X,cQ as ee,s as ne,cR as oe,bw as te,L as le,t as re,aH as ae,x as se,Q as ie,h as ue,al as de,an as ce,ax as pe,cS as fe,bg as me,aT as ve,b8 as ge,b4 as be,am as he}from"./index-d5304777.js";import{c as ye,a as we}from"./use-form-common-props-594ab9f4.js";import{c as Ee,u as Ce}from"./index-ed3b1f85.js";import{F as Ie,E as ke}from"./focus-trap-5bb091fd.js";import{E as xe}from"./el-input-18a8a90e.js";import{E as Te,a as Be,u as Se}from"./el-overlay-cfbba524.js";import{o as _e}from"./aria-ecee1d93.js";import{i as Re}from"./validator-a82dd364.js";const Me="_trap-focus-children",Fe=[],Oe=e=>{if(0===Fe.length)return;const n=Fe[Fe.length-1][Me];if(n.length>0&&e.code===i.tab){if(1===n.length)return e.preventDefault(),void(document.activeElement!==n[0]&&n[0].focus());const o=e.shiftKey,t=e.target===n[0],l=e.target===n[n.length-1];t&&o&&(e.preventDefault(),n[n.length-1].focus()),l&&!o&&(e.preventDefault(),n[0].focus())}},Le={beforeMount(e){e[Me]=_e(e),Fe.push(e),Fe.length<=1&&document.addEventListener("keydown",Oe)},updated(e){s((()=>{e[Me]=_e(e)}))},unmounted(){Fe.shift(),0===Fe.length&&document.removeEventListener("keydown",Oe)}};var $e=u(d({inheritAttrs:!1}),[["render",function(e,n,o,t,l,r){return c(e.$slots,"default")}],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);var Pe=u(d({name:"ElCollectionItem",inheritAttrs:!1}),[["render",function(e,n,o,t,l,r){return c(e.$slots,"default")}],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const Ae="data-el-collection-item",De=e=>{const n=`El${e}Collection`,o=`${n}Item`,t=Symbol(n),l=Symbol(o),r={...$e,name:n,setup(){const e=p(null),n=new Map;f(t,{itemMap:n,getItems:()=>{const o=g(e);if(!o)return[];const t=Array.from(o.querySelectorAll(`[${Ae}]`));return[...n.values()].sort(((e,n)=>t.indexOf(e.ref)-t.indexOf(n.ref)))},collectionRef:e})}},a={...Pe,name:o,setup(e,{attrs:n}){const o=p(null),r=m(t,void 0);f(l,{collectionItemRef:o}),v((()=>{const e=g(o);e&&r.itemMap.set(e,{ref:e,...n})})),b((()=>{const e=g(o);r.itemMap.delete(e)}))}};return{COLLECTION_INJECTION_KEY:t,COLLECTION_ITEM_INJECTION_KEY:l,ElCollection:r,ElCollectionItem:a}},Ke=h({style:{type:y([String,Array,Object])},currentTabId:{type:y(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:y(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:ze,ElCollectionItem:Ne,COLLECTION_INJECTION_KEY:Ge,COLLECTION_ITEM_INJECTION_KEY:je}=De("RovingFocusGroup"),He=Symbol("elRovingFocusGroup"),Ve=Symbol("elRovingFocusGroupItem"),Je={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Ue=(e,n,o)=>{const t=((e,n)=>{if("rtl"!==n)return e;switch(e){case i.right:return i.left;case i.left:return i.right;default:return e}})(e.key,o);if(!("vertical"===n&&[i.left,i.right].includes(t)||"horizontal"===n&&[i.up,i.down].includes(t)))return Je[t]},qe=e=>{const{activeElement:n}=document;for(const o of e){if(o===n)return;if(o.focus(),n!==document.activeElement)return}},Ye="currentTabIdChange",We="rovingFocusGroup.entryFocus",Qe={bubbles:!1,cancelable:!0},Ze=d({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:Ke,emits:[Ye,"entryFocus"],setup(e,{emit:o}){var t;const l=p(null!=(t=e.currentTabId||e.defaultCurrentTabId)?t:null),r=p(!1),a=p(!1),s=p(null),{getItems:i}=m(Ge,void 0),u=w((()=>[{outline:"none"},e.style])),d=n((n=>{var o;null==(o=e.onMousedown)||o.call(e,n)}),(()=>{a.value=!0})),c=n((n=>{var o;null==(o=e.onFocus)||o.call(e,n)}),(e=>{const n=!g(a),{target:o,currentTarget:t}=e;if(o===t&&n&&!g(r)){const e=new Event(We,Qe);if(null==t||t.dispatchEvent(e),!e.defaultPrevented){const e=i().filter((e=>e.focusable)),n=[e.find((e=>e.active)),e.find((e=>e.id===g(l))),...e].filter(Boolean).map((e=>e.ref));qe(n)}}a.value=!1})),v=n((n=>{var o;null==(o=e.onBlur)||o.call(e,n)}),(()=>{r.value=!1}));f(He,{currentTabbedId:E(l),loop:C(e,"loop"),tabIndex:w((()=>g(r)?-1:0)),rovingFocusGroupRef:s,rovingFocusGroupRootStyle:u,orientation:C(e,"orientation"),dir:C(e,"dir"),onItemFocus:e=>{o(Ye,e)},onItemShiftTab:()=>{r.value=!0},onBlur:v,onFocus:c,onMousedown:d}),I((()=>e.currentTabId),(e=>{l.value=null!=e?e:null})),k(s,We,((...e)=>{o("entryFocus",...e)}))}});var Xe=u(d({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:ze,ElRovingFocusGroupImpl:u(Ze,[["render",function(e,n,o,t,l,r){return c(e.$slots,"default")}],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]])}}),[["render",function(e,n,o,t,l,r){const a=x("el-roving-focus-group-impl"),s=x("el-focus-group-collection");return T(),B(s,null,{default:S((()=>[_(a,R(M(e.$attrs)),{default:S((()=>[c(e.$slots,"default")])),_:3},16)])),_:3})}],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);var en=u(d({components:{ElRovingFocusCollectionItem:Ne},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:t,loop:l,onItemFocus:r,onItemShiftTab:a}=m(He,void 0),{getItems:u}=m(Ge,void 0),d=ye(),c=p(null),v=n((e=>{o("mousedown",e)}),(n=>{e.focusable?r(g(d)):n.preventDefault()})),b=n((e=>{o("focus",e)}),(()=>{r(g(d))})),h=n((e=>{o("keydown",e)}),(e=>{const{key:n,shiftKey:o,target:t,currentTarget:r}=e;if(n===i.tab&&o)return void a();if(t!==r)return;const d=Ue(e);if(d){e.preventDefault();let n=u().filter((e=>e.focusable)).map((e=>e.ref));switch(d){case"last":n.reverse();break;case"prev":case"next":{"prev"===d&&n.reverse();const e=n.indexOf(r);n=l.value?(p=e+1,(c=n).map(((e,n)=>c[(n+p)%c.length]))):n.slice(e+1);break}}s((()=>{qe(n)}))}var c,p})),y=w((()=>t.value===g(d)));return f(Ve,{rovingFocusGroupItemRef:c,tabIndex:w((()=>g(y)?0:-1)),handleMousedown:v,handleFocus:b,handleKeydown:h}),{id:d,handleKeydown:h,handleFocus:b,handleMousedown:v}}}),[["render",function(e,n,o,t,l,r){const a=x("el-roving-focus-collection-item");return T(),B(a,{id:e.id,focusable:e.focusable,active:e.active},{default:S((()=>[c(e.$slots,"default")])),_:3},8,["id","focusable","active"])}],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const nn=h({trigger:o.trigger,effect:{...t.effect,default:"light"},type:{type:y(String)},placement:{type:y(String),default:"bottom"},popperOptions:{type:y(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:y([Number,String]),default:0},maxHeight:{type:y([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:y(Object)},teleported:t.teleported}),on=h({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:F}}),tn=h({onKeydown:{type:y(Function)}}),ln=[i.down,i.pageDown,i.home],rn=[i.up,i.pageUp,i.end],an=[...ln,...rn],{ElCollection:sn,ElCollectionItem:un,COLLECTION_INJECTION_KEY:dn,COLLECTION_ITEM_INJECTION_KEY:cn}=De("Dropdown"),pn=Symbol("elDropdown"),{ButtonGroup:fn}=e;var mn=u(d({name:"ElDropdown",components:{ElButton:e,ElButtonGroup:fn,ElScrollbar:O,ElDropdownCollection:sn,ElTooltip:l,ElRovingFocusGroup:Xe,ElOnlyChild:r,ElIcon:L,ArrowDown:$},props:nn,emits:["visible-change","click","command"],setup(e,{emit:n}){const o=P(),t=A("dropdown"),{t:l}=D(),r=p(),a=p(),s=p(null),u=p(null),d=p(null),c=p(null),m=p(!1),v=[i.enter,i.space,i.down],h=w((()=>({maxHeight:K(e.maxHeight)}))),y=w((()=>[t.m(T.value)])),E=ye().value,k=w((()=>e.id||E));function x(){var e;null==(e=s.value)||e.onClose()}I([r,C(e,"trigger")],(([e,n],[o])=>{var t,l,r;const a=V(n)?n:[n];(null==(t=null==o?void 0:o.$el)?void 0:t.removeEventListener)&&o.$el.removeEventListener("pointerenter",B),(null==(l=null==e?void 0:e.$el)?void 0:l.removeEventListener)&&e.$el.removeEventListener("pointerenter",B),(null==(r=null==e?void 0:e.$el)?void 0:r.addEventListener)&&a.includes("hover")&&e.$el.addEventListener("pointerenter",B)}),{immediate:!0}),b((()=>{var e,n;(null==(n=null==(e=r.value)?void 0:e.$el)?void 0:n.removeEventListener)&&r.value.$el.removeEventListener("pointerenter",B)}));const T=we();function B(){var e,n;null==(n=null==(e=r.value)?void 0:e.$el)||n.focus()}f(pn,{contentRef:u,role:w((()=>e.role)),triggerId:k,isUsingKeyboard:m,onItemEnter:function(){},onItemLeave:function(){const e=g(u);null==e||e.focus(),c.value=null}}),f("elDropdown",{instance:o,dropdownSize:T,handleClick:function(){x()},commandHandler:function(...e){n("command",...e)},trigger:C(e,"trigger"),hideOnClick:C(e,"hideOnClick")});return{t:l,ns:t,scrollbar:d,wrapStyle:h,dropdownTriggerKls:y,dropdownSize:T,triggerId:k,triggerKeys:v,currentTabId:c,handleCurrentTabIdChange:function(e){c.value=e},handlerMainButtonClick:e=>{n("click",e)},handleEntryFocus:function(e){m.value||(e.preventDefault(),e.stopImmediatePropagation())},handleClose:x,handleOpen:function(){var e;null==(e=s.value)||e.onOpen()},handleBeforeShowTooltip:function(){n("visible-change",!0)},handleShowTooltip:function(e){"keydown"===(null==e?void 0:e.type)&&u.value.focus()},handleBeforeHideTooltip:function(){n("visible-change",!1)},onFocusAfterTrapped:e=>{var n,o;e.preventDefault(),null==(o=null==(n=u.value)?void 0:n.focus)||o.call(n,{preventScroll:!0})},popperRef:s,contentRef:u,triggeringElementRef:r,referenceElementRef:a}}}),[["render",function(e,n,o,t,l,r){var a;const s=x("el-dropdown-collection"),i=x("el-roving-focus-group"),u=x("el-scrollbar"),d=x("el-only-child"),p=x("el-tooltip"),f=x("el-button"),m=x("arrow-down"),v=x("el-icon"),g=x("el-button-group");return T(),z("div",{class:j([e.ns.b(),e.ns.is("disabled",e.disabled)])},[_(p,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":"hover"===e.trigger?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":null==(a=e.referenceElementRef)?void 0:a.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":"hover"===e.trigger?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},N({content:S((()=>[_(u,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:S((()=>[_(i,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:S((()=>[_(s,null,{default:S((()=>[c(e.$slots,"dropdown")])),_:3})])),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])])),_:3},8,["wrap-style","view-class"])])),_:2},[e.splitButton?void 0:{name:"default",fn:S((()=>[_(d,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:S((()=>[c(e.$slots,"default")])),_:3},8,["id","tabindex"])]))}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(T(),B(g,{key:0},{default:S((()=>[_(f,G({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:S((()=>[c(e.$slots,"default")])),_:3},16,["size","type","disabled","tabindex","onClick"]),_(f,G({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:S((()=>[_(v,{class:j(e.ns.e("icon"))},{default:S((()=>[_(m)])),_:1},8,["class"])])),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])])),_:3})):H("v-if",!0)],2)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const vn=d({name:"DropdownItemImpl",components:{ElIcon:L},props:on,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const t=A("dropdown"),{role:l}=m(pn,void 0),{collectionItemRef:r}=m(cn,void 0),{collectionItemRef:a}=m(je,void 0),{rovingFocusGroupItemRef:s,tabIndex:u,handleFocus:d,handleKeydown:c,handleMousedown:p}=m(Ve,void 0),f=Ee(r,a,s),v=w((()=>"menu"===l.value?"menuitem":"navigation"===l.value?"link":"button")),g=n((e=>{const{code:n}=e;if(n===i.enter||n===i.space)return e.preventDefault(),e.stopImmediatePropagation(),o("clickimpl",e),!0}),c);return{ns:t,itemRef:f,dataset:{[Ae]:""},role:v,tabIndex:u,handleFocus:d,handleKeydown:g,handleMousedown:p}}}),gn=["aria-disabled","tabindex","role"];const bn=()=>{const e=m("elDropdown",{}),n=w((()=>null==e?void 0:e.dropdownSize));return{elDropdown:e,_elDropdownSize:n}};var hn=u(d({name:"ElDropdownItem",components:{ElDropdownCollectionItem:un,ElRovingFocusItem:en,ElDropdownItemImpl:u(vn,[["render",function(e,n,o,t,l,r){const a=x("el-icon");return T(),z(Y,null,[e.divided?(T(),z("li",G({key:0,role:"separator",class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):H("v-if",!0),J("li",G({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:n[0]||(n[0]=n=>e.$emit("clickimpl",n)),onFocus:n[1]||(n[1]=(...n)=>e.handleFocus&&e.handleFocus(...n)),onKeydown:n[2]||(n[2]=q(((...n)=>e.handleKeydown&&e.handleKeydown(...n)),["self"])),onMousedown:n[3]||(n[3]=(...n)=>e.handleMousedown&&e.handleMousedown(...n)),onPointermove:n[4]||(n[4]=n=>e.$emit("pointermove",n)),onPointerleave:n[5]||(n[5]=n=>e.$emit("pointerleave",n))}),[e.icon?(T(),B(a,{key:0},{default:S((()=>[(T(),B(U(e.icon)))])),_:1})):H("v-if",!0),c(e.$slots,"default")],16,gn)],64)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]])},inheritAttrs:!1,props:on,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:t}){const{elDropdown:l}=bn(),r=P(),s=p(null),i=w((()=>{var e,n;return null!=(n=null==(e=g(s))?void 0:e.textContent)?n:""})),{onItemEnter:u,onItemLeave:d}=m(pn,void 0),c=n((e=>(o("pointermove",e),e.defaultPrevented)),a((n=>{if(e.disabled)return void d(n);const o=n.currentTarget;o===document.activeElement||o.contains(document.activeElement)||(u(n),n.defaultPrevented||null==o||o.focus())}))),f=n((e=>(o("pointerleave",e),e.defaultPrevented)),a((e=>{d(e)})));return{handleClick:n((n=>{if(!e.disabled)return o("click",n),"keydown"!==n.type&&n.defaultPrevented}),(n=>{var o,t,a;e.disabled?n.stopImmediatePropagation():((null==(o=null==l?void 0:l.hideOnClick)?void 0:o.value)&&(null==(t=l.handleClick)||t.call(l)),null==(a=l.commandHandler)||a.call(l,e.command,r,n))})),handlePointerMove:c,handlePointerLeave:f,textContent:i,propsAndAttrs:w((()=>({...e,...t})))}}}),[["render",function(e,n,o,t,l,r){var a;const s=x("el-dropdown-item-impl"),i=x("el-roving-focus-item"),u=x("el-dropdown-collection-item");return T(),B(u,{disabled:e.disabled,"text-value":null!=(a=e.textValue)?a:e.textContent},{default:S((()=>[_(i,{focusable:!e.disabled},{default:S((()=>[_(s,G(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:S((()=>[c(e.$slots,"default")])),_:3},16,["onPointerleave","onPointermove","onClickimpl"])])),_:3},8,["focusable"])])),_:3},8,["disabled","text-value"])}],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const yn=d({name:"ElDropdownMenu",props:tn,setup(e){const o=A("dropdown"),{_elDropdownSize:t}=bn(),l=t.value,{focusTrapRef:r,onKeydown:a}=m(Ie,void 0),{contentRef:s,role:u,triggerId:d}=m(pn,void 0),{collectionRef:c,getItems:p}=m(dn,void 0),{rovingFocusGroupRef:f,rovingFocusGroupRootStyle:v,tabIndex:b,onBlur:h,onFocus:y,onMousedown:E}=m(He,void 0),{collectionRef:C}=m(Ge,void 0),I=w((()=>[o.b("menu"),o.bm("menu",null==l?void 0:l.value)])),k=Ee(s,c,r,f,C),x=n((n=>{var o;null==(o=e.onKeydown)||o.call(e,n)}),(e=>{const{currentTarget:n,code:o,target:t}=e;if(n.contains(t),i.tab===o&&e.stopImmediatePropagation(),e.preventDefault(),t!==g(s))return;if(!an.includes(o))return;const l=p().filter((e=>!e.disabled)).map((e=>e.ref));rn.includes(o)&&l.reverse(),qe(l)}));return{size:l,rovingFocusGroupRootStyle:v,tabIndex:b,dropdownKls:I,role:u,triggerId:d,dropdownListWrapperRef:k,handleKeydown:e=>{x(e),a(e)},onBlur:h,onFocus:y,onMousedown:E}}}),wn=["role","aria-labelledby"];var En=u(yn,[["render",function(e,n,o,t,l,r){return T(),z("ul",{ref:e.dropdownListWrapperRef,class:j(e.dropdownKls),style:W(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:n[0]||(n[0]=(...n)=>e.onBlur&&e.onBlur(...n)),onFocus:n[1]||(n[1]=(...n)=>e.onFocus&&e.onFocus(...n)),onKeydown:n[2]||(n[2]=q(((...n)=>e.handleKeydown&&e.handleKeydown(...n)),["self"])),onMousedown:n[3]||(n[3]=q(((...n)=>e.onMousedown&&e.onMousedown(...n)),["self"]))},[c(e.$slots,"default")],46,wn)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const Cn=Q(mn,{DropdownItem:hn,DropdownMenu:En}),In=Z(hn),kn=Z(En),xn=d({name:"ElMessageBox",directives:{TrapFocus:Le},components:{ElButton:e,ElFocusTrap:ke,ElInput:xe,ElOverlay:Te,ElIcon:L,...X},inheritAttrs:!1,props:{buttonSize:{type:String,validator:Re},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{locale:o,zIndex:t,ns:l,size:r}=ee("message-box",w((()=>e.buttonSize))),{t:a}=o,{nextZIndex:i}=t,u=p(!1),d=ne({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:i()}),c=w((()=>{const e=d.type;return{[l.bm("icon",e)]:e&&oe[e]}})),f=ye(),m=ye(),g=w((()=>d.icon||oe[d.type]||"")),h=w((()=>!!d.message)),y=p(),E=p(),C=p(),k=p(),x=p(),T=w((()=>d.confirmButtonClass));I((()=>d.inputValue),(async n=>{await s(),"prompt"===e.boxType&&null!==n&&F()}),{immediate:!0}),I((()=>u.value),(n=>{var o,t;n&&("prompt"!==e.boxType&&(d.autofocus?C.value=null!=(t=null==(o=x.value)?void 0:o.$el)?t:y.value:C.value=y.value),d.zIndex=i()),"prompt"===e.boxType&&(n?s().then((()=>{var e;k.value&&k.value.$el&&(d.autofocus?C.value=null!=(e=O())?e:y.value:C.value=y.value)})):(d.editorErrorMessage="",d.validateError=!1))}));const B=w((()=>e.draggable));function S(){u.value&&(u.value=!1,s((()=>{d.action&&n("action",d.action)})))}Ce(y,E,B),v((async()=>{await s(),e.closeOnHashChange&&window.addEventListener("hashchange",S)})),b((()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",S)}));const _=()=>{e.closeOnClickModal&&M(d.distinguishCancelAndClose?"close":"cancel")},R=Se(_),M=n=>{var o;("prompt"!==e.boxType||"confirm"!==n||F())&&(d.action=n,d.beforeClose?null==(o=d.beforeClose)||o.call(d,n,d,S):S())},F=()=>{if("prompt"===e.boxType){const e=d.inputPattern;if(e&&!e.test(d.inputValue||""))return d.editorErrorMessage=d.inputErrorMessage||a("el.messagebox.error"),d.validateError=!0,!1;const n=d.inputValidator;if("function"==typeof n){const e=n(d.inputValue);if(!1===e)return d.editorErrorMessage=d.inputErrorMessage||a("el.messagebox.error"),d.validateError=!0,!1;if("string"==typeof e)return d.editorErrorMessage=e,d.validateError=!0,!1}}return d.editorErrorMessage="",d.validateError=!1,!0},O=()=>{const e=k.value.$refs;return e.input||e.textarea},L=()=>{M("close")};return e.lockScroll&&Be(u),{...te(d),ns:l,overlayEvent:R,visible:u,hasMessage:h,typeClass:c,contentId:f,inputId:m,btnSize:r,iconComponent:g,confirmButtonClasses:T,rootRef:y,focusStartRef:C,headerRef:E,inputRef:k,confirmRef:x,doClose:S,handleClose:L,onCloseRequested:()=>{e.closeOnPressEscape&&L()},handleWrapperClick:_,handleInputEnter:e=>{if("textarea"!==d.inputType)return e.preventDefault(),M("confirm")},handleAction:M,t:a}}}),Tn=["aria-label","aria-describedby"],Bn=["aria-label"],Sn=["id"];var _n=u(xn,[["render",function(e,n,o,t,l,r){const a=x("el-icon"),s=x("close"),i=x("el-input"),u=x("el-button"),d=x("el-focus-trap"),p=x("el-overlay");return T(),B(ue,{name:"fade-in-linear",onAfterLeave:n[11]||(n[11]=n=>e.$emit("vanish")),persisted:""},{default:S((()=>[le(_(p,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:S((()=>[J("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:j(`${e.ns.namespace.value}-overlay-message-box`),onClick:n[8]||(n[8]=(...n)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...n)),onMousedown:n[9]||(n[9]=(...n)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...n)),onMouseup:n[10]||(n[10]=(...n)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...n))},[_(d,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:S((()=>[J("div",{ref:"rootRef",class:j([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:W(e.customStyle),tabindex:"-1",onClick:n[7]||(n[7]=q((()=>{}),["stop"]))},[null!==e.title&&void 0!==e.title?(T(),z("div",{key:0,ref:"headerRef",class:j(e.ns.e("header"))},[J("div",{class:j(e.ns.e("title"))},[e.iconComponent&&e.center?(T(),B(a,{key:0,class:j([e.ns.e("status"),e.typeClass])},{default:S((()=>[(T(),B(U(e.iconComponent)))])),_:1},8,["class"])):H("v-if",!0),J("span",null,re(e.title),1)],2),e.showClose?(T(),z("button",{key:0,type:"button",class:j(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:n[0]||(n[0]=n=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:n[1]||(n[1]=ae(q((n=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),["prevent"]),["enter"]))},[_(a,{class:j(e.ns.e("close"))},{default:S((()=>[_(s)])),_:1},8,["class"])],42,Bn)):H("v-if",!0)],2)):H("v-if",!0),J("div",{id:e.contentId,class:j(e.ns.e("content"))},[J("div",{class:j(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(T(),B(a,{key:0,class:j([e.ns.e("status"),e.typeClass])},{default:S((()=>[(T(),B(U(e.iconComponent)))])),_:1},8,["class"])):H("v-if",!0),e.hasMessage?(T(),z("div",{key:1,class:j(e.ns.e("message"))},[c(e.$slots,"default",{},(()=>[e.dangerouslyUseHTMLString?(T(),B(U(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(T(),B(U(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:S((()=>[se(re(e.dangerouslyUseHTMLString?"":e.message),1)])),_:1},8,["for"]))]))],2)):H("v-if",!0)],2),le(J("div",{class:j(e.ns.e("input"))},[_(i,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":n[2]||(n[2]=n=>e.inputValue=n),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:j({invalid:e.validateError}),onKeydown:ae(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),J("div",{class:j(e.ns.e("errormsg")),style:W({visibility:e.editorErrorMessage?"visible":"hidden"})},re(e.editorErrorMessage),7)],2),[[ie,e.showInput]])],10,Sn),J("div",{class:j(e.ns.e("btns"))},[e.showCancelButton?(T(),B(u,{key:0,loading:e.cancelButtonLoading,class:j([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:n[3]||(n[3]=n=>e.handleAction("cancel")),onKeydown:n[4]||(n[4]=ae(q((n=>e.handleAction("cancel")),["prevent"]),["enter"]))},{default:S((()=>[se(re(e.cancelButtonText||e.t("el.messagebox.cancel")),1)])),_:1},8,["loading","class","round","size"])):H("v-if",!0),le(_(u,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:j([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:n[5]||(n[5]=n=>e.handleAction("confirm")),onKeydown:n[6]||(n[6]=ae(q((n=>e.handleAction("confirm")),["prevent"]),["enter"]))},{default:S((()=>[se(re(e.confirmButtonText||e.t("el.messagebox.confirm")),1)])),_:1},8,["loading","class","round","disabled","size"]),[[ie,e.showConfirmButton]])],2)],6)])),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,Tn)])),_:3},8,["z-index","overlay-class","mask"]),[[ie,e.visible]])])),_:3})}],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const Rn=new Map,Mn=(e,n,o=null)=>{const t=_(_n,e,be(e.message)||pe(e.message)?{default:be(e.message)?e.message:()=>e.message}:null);return t.appContext=o,fe(t,n),(e=>{let n=document.body;return e.appendTo&&(ce(e.appendTo)&&(n=document.querySelector(e.appendTo)),he(e.appendTo)&&(n=e.appendTo),he(n)||(n=document.body)),n})(e).appendChild(n.firstElementChild),t.component},Fn=(e,n)=>{const o=document.createElement("div");e.onVanish=()=>{fe(null,o),Rn.delete(l)},e.onAction=n=>{const o=Rn.get(l);let r;r=e.showInput?{value:l.inputValue,action:n}:n,e.callback?e.callback(r,t.proxy):"cancel"===n||"close"===n?e.distinguishCancelAndClose&&"cancel"!==n?o.reject("close"):o.reject("cancel"):o.resolve(r)};const t=Mn(e,o,n),l=t.proxy;for(const r in e)me(e,r)&&!me(l.$props,r)&&(l[r]=e[r]);return l.visible=!0,l};function On(e,n=null){if(!de)return Promise.reject();let o;return ce(e)||pe(e)?e={message:e}:o=e.callback,new Promise(((t,l)=>{const r=Fn(e,null!=n?n:On._context);Rn.set(r,{options:e,callback:o,resolve:t,reject:l})}))}const Ln={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};["alert","confirm","prompt"].forEach((e=>{On[e]=function(e){return(n,o,t,l)=>{let r="";return ve(o)?(t=o,r=""):r=ge(o)?"":o,On(Object.assign({title:r,message:n,type:"",...Ln[e]},t,{boxType:e}),l)}}(e)})),On.close=()=>{Rn.forEach(((e,n)=>{n.doClose()})),Rn.clear()},On._context=null;const $n=On;$n.install=e=>{$n._context=e._context,e.config.globalProperties.$msgbox=$n,e.config.globalProperties.$messageBox=$n,e.config.globalProperties.$alert=$n.alert,e.config.globalProperties.$confirm=$n.confirm,e.config.globalProperties.$prompt=$n.prompt};const Pn=$n,An={id:"id",children:"children",pid:"pid"},Dn=e=>Object.assign({},An,e),Kn=(e,n={})=>{n=Dn(n);const{children:o}=n,t=[...e];for(let l=0;l<t.length;l++)t[l][o]&&t.splice(l+1,0,...t[l][o]);return t},zn=(e,n,o={})=>{o=Dn(o);const t=[],l=[...e],r=new Set,{children:a}=o;for(;l.length;){const e=l[0];if(r.has(e))t.pop(),l.shift();else if(r.add(e),e[a]&&l.unshift(...e[a]),t.push(e),n(e))return t}return null},Nn=(e,n,o={})=>{const t=(o=Dn(o)).children;return function e(o){return o.map((e=>({...e}))).filter((o=>(o[t]=o[t]&&e(o[t]),n(o)||o[t]&&o[t].length)))}(e)},Gn=(e,n)=>e.map((e=>jn(e,n))),jn=(e,{children:n="children",conversion:o})=>{const t=Array.isArray(e[n])&&e[n].length>0,l=o(e)||{};return t?{...l,[n]:e[n].map((e=>jn(e,{children:n,conversion:o})))}:{...l}},Hn=(e,n,o={})=>{e.forEach((e=>{const t=n(e,o)||e;e.children&&Hn(e.children,n,t)}))};export{Pn as E,Cn as a,kn as b,In as c,zn as d,Hn as e,Nn as f,Kn as g,Gn as t};
