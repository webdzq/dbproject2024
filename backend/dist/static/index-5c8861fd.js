import{d as e,r as l,s as o,V as a,o as t,i as r,w as i,e as s,a as p,x as m,P as d,f as u,t as n,_ as f}from"./index-191c25dc.js";import{E as c}from"./el-card-a8298071.js";import{E as v,a as g}from"./el-form-item-01bc0774.js";import{E as h}from"./el-input-e3d92cd0.js";import{E as w}from"./el-button-6c6de2b9.js";import{E as b}from"./el-row-ba23d37d.js";import{E as j,a as y}from"./el-table-column-2168070b.js";import"./el-checkbox-183f938a.js";import"./el-popper-39222683.js";import{d as _}from"./el-tag-3b69b670.js";import{E as z}from"./el-pagination-a2789f9e.js";import"./el-select-498792b5.js";import{a as k}from"./index-2cd7b7c8.js";import"./use-form-common-props-01089bff.js";import"./event-5568c9d8.js";import"./use-form-item-9493112b.js";import"./isNil-1f22f7b0.js";import"./focus-trap-1cdbca52.js";import"./scroll-967728ae.js";import"./validator-027b88f2.js";import"./index-7ef85113.js";const I=["href"],U=f(e({__name:"index",props:{isShow:{type:Boolean,required:!0,default:!1},isChoose:{type:Boolean,required:!0,default:!1},defaultList:{type:[Array,null],required:!0,default:null},apkId:{type:[String,Number],required:!1}},setup(e,{expose:f}){const U=e,x=l(),V=l([]),E=l(0),N=l([]),C=o({moduleName:"",commitId:"",pageUrl:""}),S=l([]),q=l(1),L=l(8),T=l(0);U.isChoose&&a((()=>U.isShow),(e=>{var l,o;e?0!==(null==(l=U.defaultList)?void 0:l.length)&&(null==(o=U.defaultList)||o.forEach((e=>{setTimeout((()=>{x.value.toggleRowSelection(e,!0)}),0)}))):(C.commitId="",C.moduleName="",C.pageUrl="",x.value.clearSelection())}),{immediate:!0});const Y=e=>{q.value=e,M()},B=e=>e.id,D=e=>{V.value=e,E.value=V.value.length,N.value=[],e&&e.forEach((e=>{e&&N.value.push(e.id)})),console.log(N.value)},H=()=>{Y(1)},M=async()=>{const e={...C,page:q.value,limit:L.value};U.apkId&&(e.apkId=U.apkId);const l=await k(e);T.value=l.meta.total,S.value=l.items};M();return f({getSelectionList:()=>V.value}),a((()=>U.apkId),(e=>{e&&H()})),(e,l)=>(t(),r(p(c),{class:"zip-page"},{header:i((()=>[s(p(v),{model:C,inline:!0,"label-width":"80"},{default:i((()=>[s(p(g),{label:"模块名称"},{default:i((()=>[s(p(h),{modelValue:C.moduleName,"onUpdate:modelValue":l[0]||(l[0]=e=>C.moduleName=e)},null,8,["modelValue"])])),_:1}),s(p(g),{label:"commitId"},{default:i((()=>[s(p(h),{modelValue:C.commitId,"onUpdate:modelValue":l[1]||(l[1]=e=>C.commitId=e)},null,8,["modelValue"])])),_:1}),s(p(g),{label:"页面链接"},{default:i((()=>[s(p(h),{modelValue:C.pageUrl,"onUpdate:modelValue":l[2]||(l[2]=e=>C.pageUrl=e)},null,8,["modelValue"])])),_:1}),s(p(w),{type:"primary",size:"large",class:"search-zip-btn",round:"",onClick:H},{default:i((()=>[m("搜索")])),_:1})])),_:1},8,["model"])])),default:i((()=>[s(p(j),{data:S.value,border:"",style:{width:"100%"},"row-key":B,onSelectionChange:D,ref_key:"multipleTableRef",ref:x,class:"zip-table"},{default:i((()=>[e.isChoose?(t(),r(p(y),{key:0,type:"selection",width:"55","reserve-selection":!0})):d("v-if",!0),s(p(y),{prop:"id",label:"id",width:"55"}),s(p(y),{prop:"pageName",label:"页面名称"}),s(p(y),{prop:"pageUrl",label:"页面链接","show-overflow-tooltip":!0}),s(p(y),{prop:"zipUrl",label:"zip链接","show-overflow-tooltip":!0},{default:i((e=>[u("a",{href:e.row.zipUrl},n(e.row.zipUrl),9,I)])),_:1}),s(p(y),{prop:"pkgVersion",label:"版本号",width:"80"}),s(p(y),{prop:"zipMd5",label:"md5","show-overflow-tooltip":!0}),s(p(y),{prop:"commitId",label:"commitId","show-overflow-tooltip":!0}),s(p(y),{prop:"moduleName",label:"模块名称","show-overflow-tooltip":!0}),s(p(y),{prop:"updatedTime",label:"更新时间"},{default:i((e=>[m(n(p(_)(e.row.updatedTime).format("YYYY/MM/DD HH:mm:ss")),1)])),_:1})])),_:1},8,["data"]),s(p(b),{justify:"end",class:"zip-pagination"},{default:i((()=>[s(p(z),{background:"",layout:"prev, pager, next","page-size":L.value,total:T.value,"current-page":q.value,onCurrentChange:Y},null,8,["page-size","total","current-page"])])),_:1})])),_:1}))}}),[["__file","/Users/zyb-dong/github/project425/fontend/src/views/ZipList/index.vue"]]);export{U as default};
