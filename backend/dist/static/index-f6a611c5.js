import{d as e,u as a,r as t,q as s,e as l,s as o,F as i,v as n,o as r,i as d,w as m,a as c,x as p,y as u,_ as g}from"./index-5daae5c6.js";import{u as f,a as h,S as _,T as b,C as y}from"./useCrudSchemas-e967c18a.js";import{E as w}from"./el-button-4a7b0ca2.js";import{E as j}from"./tree-0c97eafb.js";import"./el-input-d215ca9f.js";import{d as x,g as v}from"./index-a6d3710f.js";import{u as S}from"./useEmitt-7829992f.js";import"./el-tooltip-4cf8d1ca.js";import"./el-popper-8a023621.js";import"./useForm-92649af8.js";import"./el-form-item-ada12a4e.js";import"./el-select-03ddc29b.js";import"./index-5f2b1643.js";const P=e({name:"GameGroup"}),z=g(e({...P,setup(e){const{push:g}=a(),P=t({}),{tableRegister:z,tableState:I,tableMethods:E}=f({fetchDataApi:async()=>{const{currentPage:e,pageSize:a}=I,t=await v({page:c(e),limit:c(a),...c(P)});return console.log("res=",t),{list:t.items,total:t.meta.total}}}),{loading:k,dataList:B,total:C,currentPage:F,pageSize:G}=I,{getList:L}=E;S({name:"getGameList",callback:e=>{"add"===e&&(F.value=1),L()}});const R=s([{field:"game_id",label:"Id",search:{hidden:!0}},{field:"game_season",label:"game_season",search:{component:"Input"},form:{component:"Input",colProps:{span:24}},detail:{span:24}},{field:"stadium_name",label:"stadium_name",search:{component:"Input"},form:{component:"Input",colProps:{span:24}},detail:{span:24}},{field:"home_team",label:"home_team",search:{component:"Input"},form:{component:"Input",colProps:{span:24}},detail:{span:24}},{field:"away_team",label:"away_team",search:{hidden:!1}},{field:"score_winner",label:"score_winner",search:{hidden:!0}},{field:"score_loser",label:"score_loser",search:{hidden:!0}},{field:"game_date",label:"game_date",search:{hidden:!1}},{field:"action",label:"options",width:"240px",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{slots:{default:e=>l(i,null,[l("div",{class:"action-btns",style:"display: flex; flex-wrap: wrap"},[l(w,{type:"primary",onClick:()=>U(e[0].row,"delete")},{default:()=>[o("delete")]}),l(w,{type:"primary",onClick:()=>U(e[0].row,"edit")},{default:()=>[o("edit")]})])])}}}]),{allSchemas:T}=h(R),U=(e,a)=>{console.log("row=",e,a),"edit"===a?g(`/game/add?id=${e.game_id}`):"delete"===a?j.confirm("is deleted?","tips",{confirmButtonText:"ok",cancelButtonText:"cancel",type:"warning"}).then((async()=>{await x({game_id:e.game_id,type:"del"}).catch((()=>{}))&&(n.success("delete success"),L())})):"detail"===a&&g(`/game/add?id=${e.game_id}`)},A=e=>{P.value=e,L()};return(e,a)=>(r(),d(c(y),null,{default:m((()=>[l(c(_),{schema:c(T).searchSchema,onSearch:A},null,8,["schema"]),p(' <div class="mb-10px">\n      <ElButton type="primary" @click="creatAction">新增</ElButton>\n    </div> '),l(c(b),{pageSize:c(G),"onUpdate:pageSize":a[0]||(a[0]=e=>u(G)?G.value=e:null),currentPage:c(F),"onUpdate:currentPage":a[1]||(a[1]=e=>u(F)?F.value=e:null),columns:c(T).tableColumns,data:c(B),loading:c(k),pagination:{total:c(C)},onRegister:c(z)},null,8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])])),_:1}))}}),[["__file","/Users/zyb-dong/iit/cs425/dbproject/frontend/src/views/game/index.vue"]]);export{z as default};
