import{d as e,u as a,r as t,s as o,e as i,x as l,F as s,y as r,o as n,i as p,w as m,a as d,f as c,z as u,_ as f}from"./index-191c25dc.js";import{u as g,a as h,S as j,T as b,C as y}from"./useCrudSchemas-f975d016.js";import{E as x}from"./el-button-6c6de2b9.js";import{E as v}from"./tree-59a4fcc4.js";import"./el-input-e3d92cd0.js";import"./el-overlay-552f45f9.js";import{a as w,b as S}from"./index-adb1121b.js";import{u as z}from"./useEmitt-804a7e1a.js";import{d as P}from"./el-tag-3b69b670.js";import"./el-card-a8298071.js";import"./el-popper-39222683.js";import"./isNil-1f22f7b0.js";import"./use-form-common-props-01089bff.js";import"./focus-trap-1cdbca52.js";import"./useForm-c172fe8b.js";import"./el-form-item-01bc0774.js";import"./el-row-ba23d37d.js";import"./el-checkbox-183f938a.js";import"./event-5568c9d8.js";import"./use-form-item-9493112b.js";import"./el-radio-38688f18.js";import"./el-select-498792b5.js";import"./scroll-967728ae.js";import"./validator-027b88f2.js";import"./aria-ecee1d93.js";import"./index-b361bb8e.js";import"./el-table-column-2168070b.js";import"./el-pagination-a2789f9e.js";import"./index-89dd50e8.js";import"./vnode-113fc9d4.js";import"./index-7ef85113.js";const k={class:"mb-10px"},C=e({name:"PageMap"}),M=f(e({...C,setup(e){const{push:f}=a(),C=t({}),{tableRegister:M,tableState:B,tableMethods:I}=g({fetchDataApi:async()=>{const{currentPage:e,pageSize:a}=B,t=await S({page:d(e),limit:d(a),...d(C)});return{list:t.items,total:t.meta.total}}}),{loading:T,dataList:_,total:D,currentPage:E,pageSize:L}=B,{getList:N}=I;z({name:"getApkList",callback:e=>{"add"===e&&(E.value=1),N()}});const R=o([{field:"id",label:"Id",search:{hidden:!0}},{field:"apkName",label:"包名",search:{component:"Input"},form:{component:"Input",colProps:{span:24}},detail:{span:24}},{field:"appName",label:"应用名称",search:{component:"Input"},form:{component:"Input",colProps:{span:24}},detail:{span:24}},{field:"pageNum",label:"页面数量",search:{hidden:!0},formatter:e=>e.pages.length},{field:"online",label:"应用状态",search:{component:"Select",componentProps:{options:[{label:"上线",value:"1"},{label:"下线",value:"0"}]}},formatter:(e,a)=>"1"==e.online?"上线":"下线"},{field:"createdBy",label:"创建人",search:{hidden:!0}},{field:"updatedBy",label:"更新人",search:{hidden:!0}},{field:"updatedTime",label:"更新时间",search:{hidden:!0},formatter:(e,a,t)=>P(t).format("YYYY-MM-DD HH:mm:ss")},{field:"action",label:"操作",width:"240px",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{slots:{default:e=>i(s,null,[i("div",{class:"action-btns",style:"display: flex; flex-wrap: wrap"},[i(x,{type:"primary",onClick:()=>Y(e[0].row,"detail")},{default:()=>[l("详情")]}),i(x,{type:"primary",onClick:()=>Y(e[0].row,"edit")},{default:()=>[l("编辑")]}),"1"==e[0].row.online&&i(x,{type:"danger",onClick:()=>Y(e[0].row,"offline")},{default:()=>[l("下线")]})])])}}}]),{allSchemas:U}=h(R),Y=(e,a)=>{console.log(e,a),"edit"===a?f(`/localization/page-map/add?id=${e.id}`):"offline"===a?v.confirm("确定下线吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await w({id:e.id}).catch((()=>{}))&&(r.success("下线成功"),N())})):"detail"===a&&f(`/localization/page-map/detail?id=${e.id}`)},A=()=>{f("/localization/page-map/add")},F=e=>{C.value=e,N()};return(e,a)=>(n(),p(d(y),null,{default:m((()=>[i(d(j),{schema:d(U).searchSchema,onSearch:F},null,8,["schema"]),c("div",k,[i(d(x),{type:"primary",onClick:A},{default:m((()=>[l("新增")])),_:1})]),i(d(b),{pageSize:d(L),"onUpdate:pageSize":a[0]||(a[0]=e=>u(L)?L.value=e:null),currentPage:d(E),"onUpdate:currentPage":a[1]||(a[1]=e=>u(E)?E.value=e:null),columns:d(U).tableColumns,data:d(_),loading:d(T),pagination:{total:d(D)},onRegister:d(M)},null,8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])])),_:1}))}}),[["__file","/Users/zyb-dong/github/project425/fontend/src/views/PageMap/index.vue"]]);export{M as default};
